<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <link rel="stylesheet" type="text/css" href="./css/reset.css">
    <title>门禁管理系统</title>
    <style>
        #home{
            background: #f4f4f4;
            font-family: "微软雅黑",PingFang SC, Microsoft YaHei UI, Microsoft YaHei, Arial, sans-serif;
            width:100%;
            height: 100vh;
            overflow: hidden;
        }
        .homeList{
            background: #fff;
            margin-bottom: 20px;
            padding: 15px 20px;
        }
        .homeList img{
            height: 50px;
            width:50px;
            display: inline-block;
            vertical-align: middle;
        }
        .homeList span{
            display: inline-block;
            vertical-align: middle;
            line-height: 50px;
            font-size: 16px;
            color: #232323;
        }
    </style>
    <script src="./js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
<div id="home">
</div>
</body>
<script>
    window.onload = function() {
        document.addEventListener('message', function(msg) {
            var data = JSON.parse(msg.data)
            if(data.hasOwnProperty('phoneNum')){
                localStorage.setItem('phone',data.phoneNum)
            }
        });
    }
    $(function(){
        var a = [{name:'haha1',plan:[{planId:1,value: 'dddd1'},{planId:2,value: 'dddd2'},{planId:3,value: 'dddd3'}]},{name:'haha2',plan:[{planId:1,value: 'dddd'},{planId:2,value: 'dddd'},{planId:3,value: 'dddd'}]},{name:'haha3',plan:[{planId:1,value: 'dddd'},{planId:2,value: 'dddd'},{planId:3,value: 'dddd'}]},{name:'haha4',plan:[{planId:1,value: 'dddd'},{planId:2,value: 'dddd'},{planId:3,value: 'dddd'}]}];
        var b = [{id:1,name:'方案一'},{id:2,name:'方案二'},{id:3,name:'方案三'}];
        var c = [];
        for(var j = 0;j < b.length; j++){
            var obj = {
                id: '',
                name: '',
                content:[],
            };
            obj.name = b[j].name;
            for(var i = 0;i<a.length;i++){
                var obj1 = {//value
                    name:'',
                    value: ''
                }
                obj1.name = a[i].name;
                for(var k = 0;k< a[i].plan.length; k++){
                    console.log(i,k)
                    if(b[j].id == a[i].plan[k].planId){
                        obj1.value = a[i].plan[k].value;
                        obj.content.push(obj1)
                        break;
                    }
                }
            }
            c.push(obj)
        }
        console.log(c)
        var  listdata = [
            {'name':'预约申请',icon:'./images/shenqing.png',router: './userinfo.html'},
            {'name':'历史申请记录',icon:'./images/liebiao.png',router: './applayList.html'}];
        var str = '';
        for(let item of listdata){
            str+='<div class="homeList flexBetween" onclick="goRouter(this)" data-router='+item.router+'><span>'+item.name+'</span><img src='+item.icon+'></div>'
        }
        $("#home").append($(str))
    })
    function goRouter(even){
        window.location.href = $(even).attr("data-router")
    }
</script>
</html>